# --- 1. USER TYPE ---
type User @table {
  id: String! @col(name: "uid") @default(expr: "auth.uid")
  username: String!
  email: String
}

# --- 2. MAIN TYPES ---
type GameNight @table {
  id: UUID! 
  name: String!
  description: String
  eventDate: Date!       
  eventTime: String      
  isFinalized: Boolean
  creator: User!
  createdAt: Timestamp! @default(expr: "request.time")
}

type GameSuggestion @table {
  id: UUID!
  title: String!
  votes: Int @default(value: 0)
  suggestedBy: User!
  createdAt: Timestamp! @default(expr: "request.time")
}

# --- 3. JOIN TABLES ---
type GameNightProposal @table(key: ["gameNight", "suggestion"]) {
  gameNight: GameNight!
  suggestion: GameSuggestion!
  createdAt: Timestamp! @default(expr: "request.time")
}

type GameNightInvitation @table {
  id: UUID!
  gameNight: GameNight!
  user: User!
  status: String!
  createdAt: Timestamp! @default(expr: "request.time")
}